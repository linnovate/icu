<section class="display-by">
    <p class="title all"
       ui-sref="main.{{context.main}}.all" ui-sref-active="active"
       data-ng-class="{ 'selected': context.entityName === 'all' }">
        {{ 'all' | i18next }}
    </p>

    <p class="intro">{{'display'+context.main+'By' | i18next}}:</p>

    <div class="list projects" ng-if="projects && (icuDisplayBy.indexOf('projects'))>-1">
        <p ng-click="visible.project = !visible.project" class="title">{{ 'Projects' | i18next }}</p>
        <ul ng-if="visible.project">
            <li data-ng-repeat="project in projects | limitTo: displayLimit['projects']"
                data-ng-class="{'selected': context.entityName === 'project' && project._id === context.entityId }"
                data-ng-click="switchTo('project', project._id)">
                <a href>
                    {{project.title}}
                </a>
                <div class="tag-color" ng-style="color={'background-color': '#' + '{{project.color}}'}"></div>
            </li>
            <li ng-if="projects.length >  displayLimit['projects']" ng-click="showMore(projects.length, 'projects')" class="more">{{ 'more' | i18next }}</li>
            <li ng-if="projects.length ==  displayLimit['projects']" ng-click="collapse('projects')" class="more">{{ 'Less...' | i18next }}</li>

        </ul>
    </div>

    <div class="list discussions" ng-if="discussions && (icuDisplayBy.indexOf('discussions'))>-1">
        <p ng-click="visible.discussion = !visible.discussion" class="title">{{ 'discussions' | i18next }}</p>
        <ul ng-if="visible.discussion">
            <li data-ng-repeat="discussion in discussions | limitTo:displayLimit['discussions']"
                data-ng-class="{'selected': context.entityName === 'discussion' && discussion._id === context.entityId }"
                data-ng-click="switchTo('discussion', discussion._id)">
                <a href>
                    {{discussion.title || discussion.name}}
                </a>
            </li>
            <li ng-if="discussions.length >  displayLimit['discussions']" ng-click="showMore(discussions.length, 'discussions')" class="more">{{ 'more' | i18next }}</li>
            <li ng-if="discussions.length ==  displayLimit['discussions']" ng-click="collapse('discussions')" class="more">{{ 'Less...' | i18next }}</li>
        </ul>
    </div>

    <div class="list people" ng-if="people && (icuDisplayBy.indexOf('people'))>-1">
        <p ng-click="visible.user = !visible.user" class="title">{{ 'people' | i18next }}</p>
        <ul ng-if="visible.user">
            <li data-ng-repeat="user in people | limitTo:3"
                data-ng-click="switchTo('user', user._id)">
                <a href data-ng-link="main.users.details({id: user._id})">
                    <div icu-avatar user="user"></div>
                    <span class="name">{{user.name}}</span>
                </a>
            </li>
        </ul>
    </div>
</section>
